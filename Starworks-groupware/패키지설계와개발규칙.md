# 패키지 설계 규칙


## 1. 기본 원칙 (model layer 구축 시)
*   **도메인 중심 설계**: 관련된 기능(Controller, Service, DAO/Mapper, VO)은 하나의 상위 패키지 내에 그룹화합니다.
*   **테이블명 기반 패키지명**: 패키지명은 관련된 주요 데이터베이스 테이블의 접두사나 주제를 기반으로 명명합니다. 패키지 이름 소문자로 시작, 클래스 이름 대문자로 시작, view 관련 파일 소문자로 시작, 변수 이름 소문자로 시작. CamelCase를 적용합니다.
*   **계층 분리**: 각 도메인 패키지 내에서는 `controller`, `service`, `dao` (또는 `mapper`), `vo` 등의 하위 패키지를 두어 역할을 명확히 분리합니다.
*   **mapper,service 작성**:모든 service 인터페이스와 mapper 인터페이스 메소드에는 주석을 작성합니다.
							mapper의 CRUD 메소드 이름은 select, insert, updage, delete 로 통일합니다.
							service 의 CRUD 메소드 이름은 read, create, modify, remove로 통일합니다.
							* create 대신 register 사용 가능. 이외에도 다른 표현이 적절하다면 변경 가능.
							mapper 의존성 주입은 생성자 주입 방식으로 한다.
							단건 조회 실패 시, service 에서는 NotFound예외를 발생(EntityNotFoundException)시킵니다.



## 2. 테이블과 패키지 매핑 규칙

데이터베이스 테이블의 이름과 주제에 따라 다음과 같이 Java 패키지를 매핑합니다. 각 패키지는 관련된 데이터베이스 테이블 그룹을 관리합니다.

*   **전자결재 (`kr.or.ddit.approval`)**
    *   **관련 테이블**: `AUTHORIZATION_*`, `BUSINESS_TRIP`, `VACATION`
    *   **설명**: 전자결재 관련 기능 (기안, 결재선, 출장/휴가 신청)

*   **커뮤니티 (`kr.or.ddit.community`)**
    *   **관련 테이블**: `BOARD`, `BOARD_COMMENT`
    *   **설명**: 게시판, 공지사항 등 커뮤니티 기능

*   **프로젝트 (`kr.or.ddit.project`)**
    *   **관련 테이블**: `PROJECT`, `PROJECT_*`, `MAIN_TASK`
    *   **설명**: 프로젝트 및 업무(Task) 관리 기능

*   **근태 (`kr.or.ddit.attendance`)**
    *   **관련 테이블**: `TIME_AND_ATTENDANCE`, `WORKING_STATUS`
    *   **설명**: 근태 관리 (출/퇴근, 근무 상태) 기능

*   **일정 (`kr.or.ddit.calendar`)**
    *   **관련 테이블**: `USER_SCHEDULE`, `DEPARTMENT_SCHEDULE`
    *   **설명**: 개인 및 부서 일정 관리 기능

*   **조직 (`kr.or.ddit.orchart`)**
    *   **관련 테이블**: `USERS`, `DEPARTMENT`, `JOB_GRADE`
    *   **설명**: 조직도, 사용자 정보, 부서 관리 기능

*   **이메일 (`kr.or.ddit.email`)**
    *   **관련 테이블**: `EMAIL_*`
    *   **설명**: 이메일 관련 기능

*   **메신저 (`kr.or.ddit.messenger`)**
    *   **관련 테이블**: `MESSENGER_*`
    *   **설명**: 메신저 관련 기능

*   **공통 모듈 (`kr.or.ddit.comm.*`)**
    *   **파일 (`.file`)**:
        *   **관련 테이블**: `FILE_*`
        *   **설명**: 시스템 전반의 파일 업로드/다운로드 공통 기능
    *   **공통 코드 (`.code`)**:
        *   **관련 테이블**: `COMMON_CODE*`
        *   **설명**: 공통 코드 관리 공통 기능
    *   **기타**:
        *   **설명**: 보안, 설정, 페이징 등 공통 로직

---

## 3. 패키지 구조 예시

`전자결재(approval)` 도메인을 예시로 한 패키지 구조

```
kr.or.ddit
 └── approval
     ├── controller   // 컨트롤러 (요청) 처리
     │   ├── ApprovalController.java
     │   └── VacationController.java
     ├── service      // 비즈니스 로직 레이어
     │   ├── ApprovalService.java
     │   └── ApprovalServiceImpl.java
     ├── dao          // 퍼시스턴스 레이어 (또는 mapper)
     │   └── ApprovalMapper.java
     └── vo           // 도메인 레이어. 
         ├── AuthorizationDocumentVO.java
         ├── BusinessTripVO.java
         └── VacationVO.java
         
   mapper.xml 파일은 src/main/resources/kr/or/ddit/mybatis/mapper 에서 일괄 관리!

---

## 4. 공통 모듈 규칙

*   `kr.or.ddit.comm.conf`: Spring 설정 관련 클래스
*   `kr.or.ddit.security`: Spring Security 관련 클래스
*   `kr.or.ddit.validate`: 유효성 검증 관련 클래스

---

## 5. SVN 규칙

*   **커밋 전 동기화**: 커밋 전 `Synchronize` 기능을 사용해 원격 저장소의 변경 사항을 확인하고, 충돌이 예상되는 부분을 미리 검토하고 해결합니다.
*	**커밋 전 주의사항**: 프로젝트 단위에서 커밋을 지양합니다. 커밋할 파일 하나하나 선택해서 커밋하고, 만약 프로젝트 단위에서 커밋을 하게되면 제외 파일이 있는지 확인합니다.
*   **커밋 전 업데이트**: 자신의 로컬 복사본을 항상 최신 상태로 유지하기 위해 커밋하기 전에 반드시 `Update`를 실행합니다.
*   **커밋 메시지**: 커밋 메시지는 변경 사항과 날짜를 게시하고 간결하게 설명해야 합니다. (예: `fix : 게시판 페이징 오류 수정`)
	
	feat:	새 기능을 추가했을 때	                                                       
	ex) feat: 사용자 프로필 수정 기능 추가
	
	fix: 	버그를 수정했을 때	                                                       
	ex) fix: 로그인 시 발생하는 500 에러 수정
	
	chor:	기능 추가나 버그 수정이 아닌 잡다한 작업 (라이브러리 업데이트, 설정 파일 변경 등)	
	ex) chore: ESLint 설정 파일 업데이트
	
	docs:	문서만 수정했을 때 (README, 주석 등)	
	ex) docs: 설치 가이드에 예시 추가

*   **충돌 해결**: 충돌이 발생하면 동료와 소통하여 코드를 병합하고 해결한 후 커밋합니다. 임의로 자신의 코드를 덮어쓰지 않습니다.
*   **주기적인 커밋**: 작업이 완료된 작은 단위로 자주 커밋하여 변경 이력을 명확하게 남깁니다.
*   **제외 파일 관리**: `target`, `.classpath`, `.project`, `.settings`와 같이 프로젝트에 불필요한 파일은 커밋 대상에서 제외합니다.

---

## 6. Controller URI 작성 규칙

*   **자원(Resource) 중심의 명사 사용**: URL은 동사가 아닌 명사를 사용하여 자원을 표현합니다. (예: `/approval`,`/users`, `/boards`)
*   **계층 구조 표현**: 관련된 자원 간의 계층 구조는 `/`를 사용하여 표현합니다. (예: `/boards/{boardId}/comments`)
*   **식별자는 경로 변수 사용**: 특정 자원을 식별해야 할 경우, 경로 변수(Path Variable)를 사용합니다. (예: `/users/{userId}`)
*   **소문자 및 하이픈(-)**: URL은 소문자로 작성하고, 단어 간 구분은 하이픈(`-`)을 사용합니다. (예: `/business-trips`)