<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>임시보관함 - 전자결재</title>
<!--     <link rel="preconnect" href="https://fonts.gstatic.com"> -->
<!--     <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet"> -->
<!--     <link rel="stylesheet" href="mazer-1.0.0/dist/assets/css/bootstrap.css"> -->
<!--     <link rel="stylesheet" href="mazer-1.0.0/dist/assets/vendors/perfect-scrollbar/perfect-scrollbar.css"> -->
<!--     <link rel="stylesheet" href="mazer-1.0.0/dist/assets/vendors/bootstrap-icons/bootstrap-icons.css"> -->
<!--     <link rel="stylesheet" href="mazer-1.0.0/dist/assets/css/app.css"> -->
<!--     <link rel="shortcut icon" href="mazer-1.0.0/dist/assets/images/favicon.svg" type="image/x-icon"> -->

</head>
<body>

	<div id="main-content">
		<div class="page-heading">
			<div class="page-title">
				<div class="row">
					<div class="col-12 col-md-6 order-md-1 order-last">
						<h3>임시보관함</h3>
						<p class="text-subtitle text-muted">작성 중인 문서를이어서 작성하거나 삭제할 수
							있습니다.</p>
					</div>
				</div>
			</div>
			<section class="section">
				<div class="card">
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-lg table-hover" id="drafts-table">
								<thead>
									<tr>
										<th>문서종류</th>
										<th>제목</th>
										<th>기안자</th>
										<th>저장일</th>
									</tr>
								</thead>
								<tbody>
									<tr data-href="전자/draft_proposal.html">
										<td class="text-bold-500">기안서</td>
										<td>2025년 하반기 워크샵 기획안</td>
										<td class="text-bold-500">이대리</td>
										<td>2025-09-17</td>
									</tr>
									<tr data-href="leave_request_v3.html">
										<td class="text-bold-500">휴가신청서</td>
										<td>개인 사유로 인한 연차 사용</td>
										<td class="text-bold-500">이대리</td>
										<td>2025-09-16</td>
									</tr>
									<tr data-href="expense_report_form.html">
										<td class="text-bold-500">지출결의서</td>
										<td>8월 시내 출장 교통비</td>
										<td class="text-bold-500">김차장</td>
										<td>2025-09-15</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>


	<script>
        document.addEventListener('DOMContentLoaded', function () {
            const draftsTableBody = document.querySelector('#drafts-table tbody');
            if (draftsTableBody) {
                const savedDrafts = JSON.parse(localStorage.getItem('savedDrafts')) || [];
                
                // Append saved drafts from localStorage
                savedDrafts.forEach(doc => {
                    const row = document.createElement('tr');
                    if (doc.href) {
                        row.dataset.href = `${doc.href}?draftId=${doc.id}`;
                    }
                    row.innerHTML = `
                        <td class="text-bold-500">${doc.docType}</td>
                        <td>${doc.title}</td>
                        <td class="text-bold-500">${doc.drafter}</td>
                        <td>${doc.savedDate}</td>
                    `;
                    draftsTableBody.appendChild(row);
                });

                // If there are no rows at all after trying to append, show the message.
                if (draftsTableBody.children.length === 0) {
                    draftsTableBody.innerHTML = '<tr><td colspan="4" class="text-center text-muted">임시 저장된 문서가 없습니다.</td></tr>';
                }

                draftsTableBody.addEventListener('click', function(e) {
                    const row = e.target.closest('tr[data-href]');
                    if (row) {
                        window.location.href = row.dataset.href;
                    }
                });
            }
        });
    </script>
</body>
</html>